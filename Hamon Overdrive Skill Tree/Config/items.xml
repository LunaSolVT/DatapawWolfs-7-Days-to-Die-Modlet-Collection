<configs>
    <!--
        WISHLIST:
            * Power Attack modified range for more variation in swing types
            * Ability to specify different swing animations instead of one hold type leading to only two animations
            * Ability to swap Base and Power animations
            * Support for overriding the necessity for localization file editing by using decs_base="description here" - a much more modder-friendly solution
            * Support for sounds to be triggerable outside of their corresponding effect group
            * Fix for onSelfPrimary/SecondaryActionRayHit "other" affecting the player in servers versus singleplayer
            * onSelf[Primary, Secondary]ActionGrazeHit - why this does not exist is beyond me
    -->
    <insertAfter xpath="/items/item[@name='meleeKnucklesIron']"> <!-- Defines where the XML will be inserted when the mod is loaded -->
        <item id="hamonMetalSilverOverdrivers" name="Hamon Metal Silver Drivers"> <!-- T2 Hamon -->
            <property name="Extends" value="meleeKnucklesIron"/>
            <property name="CustomIcon" value="meleeKnucklesIron"/>
            <property name="CustomIconTint" value="250,250,250"/>
            <property name="TintColor" value="250,250,250"/>
            <property name="Tags" value="blunt,melee,light,weapon,canHaveCosmetic,attHamon,perkHamonRapidBreathing,perkHamonBarrage,perkHamonBurst,perkHamonStoneGreyOverdrive,perkHamonSunlightYellowOverdrive,perkHamonForcedBreathing"/>
            <property name="Material" value="Mmetal"/>
            <property name="Meshfile" value="#Other/Items?Weapons/Melee/Knuckles/knuckles_Prefab.prefab"/>
            <property name="HoldType" value="61"/>
            <property name="RepairTools" value="resourceRepairKit"/>
            <property name="DegradationBreaksAfter" value="false"/>
            <property name="SoundJammed" value="ItemNeedsRepair"/>
            <property name="SoundDestroy" value="wooddestroy1"/>
            <property name="DisplayType" value="melee"/>
            <property name="Canhold" value="true"/>
            <property name="Group" value="Ammo/Weapons"/>
            <property name="EconomicValue" value="350"/>
            <property name="UnlockedBy" value="Hamon"/>
            <property name="ShowQuality" value="true"/>
            <property class="Action0">
                <property name="Class" value="DynamicMelee"/>
                <property name="Sphere" value=".15"/>
                <property name="Damage_type" value="Bashing"/>

                <property name="UseGrazingHits" value="true"/>
                <property name="GrazeStart" value=".3"/>
                <property name="GrazeEnd" value=".5"/>
                <property name="SwingDegrees" value="90"/>
                <property name="SwingAngle" value="-90"/>
            </property>
            <property class="Action1"> <!-- UseAction -->
                <property name="Class" value="DynamicMelee"/>
                <property name="Sphere" value=".15"/>   <!-- limit to 0.15, else the sphere cast can overlap the target already -->
                <property name="UsePowerAttackAnimation" value="true"/>

                <property name="UseGrazingHits" value="true"/>
                <property name="GrazeStart" value=".35"/>
                <property name="GrazeEnd" value=".4"/>
                <property name="SwingDegrees" value="30"/>
                <property name="SwingAngle" value="90"/>
            </property>
            <effect_group name="hamonMetalSilverOverdrivers">
                <passive_effect name="EntityDamage" operation="base_set" value="5"/>
                <passive_effect name="EntityDamage" operation="perc_add" value="-.10,.10"/> <!-- random rng -->
                <passive_effect name="EntityDamage" operation="perc_add" value=".1,.5" tier="2,6"/> <!-- tier bonus -->

                <passive_effect name="BlockDamage" operation="base_set" value="5"/>
                <passive_effect name="BlockDamage" operation="perc_add" value="-.10,.10"/> <!-- random BlockDmg -->
                <passive_effect name="BlockDamage" operation="perc_add" value=".1,.5" tier="2,6"/> <!-- tier bonus -->

                <passive_effect name="DamageModifier" operation="perc_add" value="-.5" tags="earth,stone,metal"/>
                <passive_effect name="AttacksPerMinute" operation="base_set" value="50"/>
                <passive_effect name="StaminaLoss" operation="base_set" value="9.2" tags="primary"/>

                <passive_effect name="MaxRange" operation="base_set" value="2.0"/>
                <passive_effect name="BlockRange" operation="base_set" value="2.0"/>

                <passive_effect name="DegradationMax" operation="base_set" value="1000,2000" tier="1,6"/>
                <passive_effect name="DegradationPerUse" operation="base_set" value="1"/>
                <passive_effect name="ModSlots" operation="base_set" value="0"/>

                <triggered_effect trigger="onSelfEquipStart" action="AddPart" part="LeftKnucklesFPV" prefab="#Other/Items?Weapons/Melee/Knuckles/knuckles_Prefab.prefab" parentTransform="Propjoint" localPos="0,0,0" localRot="0,0,0"/>
                <triggered_effect trigger="onSelfEquipStop" action="RemovePart" part="LeftKnucklesFPV"/>

                <triggered_effect trigger="onSelfPrimaryActionEnd" action="RemovePart" part="LeftKnuckleSparks"/>
		        <triggered_effect trigger="onSelfPrimaryActionStart" action="AddPart" part="LeftKnuckleSparks" prefab="ParticleEffects/p_electric_shock_small" parentTransform="Propjoint" localPos="0,-.55,0" localRot="0,0,0"/>

                <triggered_effect trigger="onSelfSecondaryActionEnd" action="RemovePart" part="RightKnuckleSparks"/>
		        <triggered_effect trigger="onSelfSecondaryActionStart" action="AddPart" part="RightKnuckleSparks" prefab="ParticleEffects/p_electric_shock_small" parentTransform="#HeldItemRoot" localPos="0,-.55,0" localRot="0,0,0"/>
            </effect_group>

            <effect_group name="Power Attack">
                <passive_effect name="EntityDamage" operation="perc_add" value="1" tags="secondary"/>
                <passive_effect name="BlockDamage" operation="perc_add" value="1" tags="secondary"/>
                <passive_effect name="AttacksPerMinute" operation="perc_add" value="-.25" tags="secondary"/>
                <passive_effect name="StaminaLoss" operation="base_add" value="18.4" tags="secondary"/>
            </effect_group>
        </item>
    </insertAfter>
</configs>